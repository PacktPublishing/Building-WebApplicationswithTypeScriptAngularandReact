{"version":3,"sources":["client/app.component.ts"],"names":[],"mappings":"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","file":"app.component.js","sourcesContent":["import \"zone.js/dist/zone.js\";\nimport \"rxjs\";\nimport \"reflect-metadata\";\nimport \"es6-shim\";\n\nimport { Component } from \"@angular/core\";\nimport { Http, Response } from \"@angular/http\";\nimport { getUrl } from \"./api\";\nimport { MenuItem, MenuResult, ItemResult } from \"../shared/api\";\n\nenum State {\n\tLogin,\n\tMenu,\n\tNote,\n\tError\n}\n\n@Component({\n\tselector: \"note-application\",\n\ttemplate: `\n\t\t<h1>My Notes</h1>\n\t\t<login-form *ngIf=\"stateLogin\" (success)=\"loadMenu()\"></login-form>\n\t\t<div *ngIf=\"!stateLogin\">\n\t\t\t<a href=\"javascript:;\" (click)=\"logout()\">Log out</a>\n\t\t</div>\n\t\t<notes-menu *ngIf=\"stateMenu\" [items]=\"menu\" (create)=\"createNote()\" (open)=\"loadNote($event)\"></notes-menu>\n\t\t<note-editor *ngIf=\"stateNote && note\" [content]=\"note.content\" (save)=\"save($event)\" (remove)=\"remove($event)\"></note-editor>\n\t\t<div *ngIf=\"stateError\">\n\t\t\t<h2>Something went wrong</h2>\n\t\t\tReload the page and try again\n\t\t</div>\n\t\t`\n})\nexport class AppComponent {\n\tstate = State.Menu;\n\n\tconstructor(private http: Http) {\n\t\tthis.loadMenu();\n\t}\n\n\tget stateLogin() {\n\t\treturn this.state === State.Login;\n\t}\n\tget stateMenu() {\n\t\treturn this.state === State.Menu;\n\t}\n\tget stateNote() {\n\t\treturn this.state === State.Note;\n\t}\n\tget stateError() {\n\t\treturn this.state === State.Error;\n\t}\n\n\tmenu: MenuItem[] = [];\n\tnote: ItemResult = undefined;\n\n\thandleError(error: Response) {\n\t\tif (error.status === 401) {\n\t\t\t// Unauthorized\n\t\t\tthis.state = State.Login;\n\t\t\tthis.menu = [];\n\t\t\tthis.note = undefined;\n\t\t} else {\n\t\t\tthis.state = State.Error;\n\t\t}\n\t}\n\tloadMenu() {\n\t\tthis.state = State.Menu;\n\t\tthis.menu = [];\n\t\tthis.http.get(getUrl(\"note/list\", {})).subscribe(\n\t\t\tresponse => {\n\t\t\t\tconst body = <MenuResult>response.json();\n\t\t\t\tthis.menu = body.items;\n\t\t\t},\n\t\t\terror => this.handleError(error)\n\t\t);\n\t}\n\tcreateNote() {\n\t\tthis.note = {\n\t\t\tid: undefined,\n\t\t\tcontent: \"\"\n\t\t};\n\t\tthis.state = State.Note;\n\t}\n\tloadNote(id: string) {\n\t\tthis.note = undefined;\n\t\tthis.http.get(getUrl(\"note/find\", { id: id })).subscribe(\n\t\t\tresponse => {\n\t\t\t\tthis.state = State.Note;\n\t\t\t\tthis.note = <ItemResult>response.json();\n\t\t\t},\n\t\t\terror => this.handleError(error)\n\t\t);\n\t}\n\tsave(content: string) {\n\t\tlet url: string;\n\t\tthis.note.content = content;\n\t\tif (this.note.id === undefined) {\n\t\t\t// New note\n\t\t\turl = getUrl(\"note/insert\", { content: this.note.content });\n\t\t} else {\n\t\t\t// Existing note\n\t\t\turl = getUrl(\"note/update\", {\n\t\t\t\tid: this.note.id,\n\t\t\t\tcontent: this.note.content\n\t\t\t});\n\t\t}\n\n\t\tthis.state = State.Note;\n\t\tthis.note = undefined;\n\t\tthis.http.get(url).subscribe(\n\t\t\tresponse => {\n\t\t\t\tthis.loadMenu();\n\t\t\t},\n\t\t\terror => this.handleError(error)\n\t\t);\n\t}\n\tremove() {\n\t\tif (this.note.id === undefined) {\n\t\t\tthis.loadMenu();\n\t\t\treturn;\n\t\t}\n\t\tthis.http.get(getUrl(\"note/remove\", { id: this.note.id })).subscribe(\n\t\t\tresponse => {\n\t\t\t\tthis.loadMenu();\n\t\t\t},\n\t\t\terror => this.handleError(error)\n\t\t);\n\t}\n\tlogout() {\n\t\tthis.http.get(getUrl(\"logout\", {})).subscribe(\n\t\t\tresponse => {\n\t\t\t\tthis.state = State.Login;\n\t\t\t\tthis.menu = [];\n\t\t\t\tthis.note = undefined;\n\t\t\t},\n\t\t\terror => this.handleError(error)\n\t\t);\n\t}\n}\n"]}